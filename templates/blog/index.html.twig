{% extends 'back-base.html.twig' %}

{% block title %}Liste des Blogs{% endblock %}

{% block body %}
    <!-- Bouton flottant à gauche -->
    <!-- Bouton flottant à gauche -->
    <a href="{{ path('app_blog_new') }}" class="btn add-blog-btn">
        ➕ Ajouter Blog
    </a>

    <!-- Titre de la page -->
    <div class="container text-center mt-4">
        <h1 class="display-4 text-dark fw-bold">📜 Liste des Articles du Blog</h1>
        <p class="text-muted">Découvrez nos derniers articles et actualités</p>
    </div>

    <!-- Section des articles -->
    <section class="container py-5">
        <div class="row">
            {% for blog in blogs %}
                <div class="col-sm-6 col-md-4 mb-4">
                    <div class="card blog-card shadow-lg border-0 rounded-lg overflow-hidden">
                        <div class="card-img-top text-center p-3 bg-light">
                            <img src="{{ asset('uploads/images/' ~ blog.image) }}" alt="Blog Image" class="img-fluid rounded" style="height: 200px; object-fit: cover;">
                        </div>
                        <div class="card-body">
                            <h5 class="card-title text-dark fw-bold">{{ blog.titre }}</h5>
                            <p class="card-text text-muted">
                                {{ blog.contenu|length > 100 ? blog.contenu|slice(0, 100) ~ '...' : blog.contenu }}
                            </p>
                            <p class="text-muted">
                                <small>🗓 Publié le : 
                                    {{ blog.datePublication ? blog.datePublication|date('Y-m-d H:i:s') : 'Non daté' }}
                                </small>
                            </p>
                            <a href="{{ path('app_blog_show', {'idArticle': blog.idArticle}) }}" class="btn btn-outline-primary btn-sm">📖 Lire plus</a>
                        </div>
                        <div class="card-footer bg-light d-flex justify-content-between">
<a href="{{ path('app_blog_edit', {'idArticle': blog.idArticle}) }}" class="btn btn-secondary btn-sm">✏️ Modifier</a>
                            <a href="{{ path('app_blog_delete', {'idArticle': blog.idArticle}) }}" 
                               class="btn btn-danger btn-sm"
                               onclick="return confirm('Êtes-vous sûr de vouloir supprimer cet article ?');">
                               🗑 Supprimer
                            </a>
                        </div>
                    </div>
                </div>
            {% else %}
                <div class="col-12 text-center">
                    <p class="text-muted">😞 Aucun article trouvé.</p>
                </div>
            {% endfor %}
        </div>
    </section>
{% endblock %}
